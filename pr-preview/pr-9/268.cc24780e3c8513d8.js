"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[268],{6268:(z,T,i)=>{i.r(T),i.d(T,{AuthModule:()=>X});var p=i(8692),s=i(9900),v=i(9638),g=i(8659),A=i(9665),b=i(8697),t=i(4537),c=i(3382);let C=(()=>{class r{constructor(e){this.authService=e}canActivate(){return this.authService.isNotLoggedIn()}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(c.e))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})(),L=(()=>{class r{constructor(e){this.authService=e}canActivate(){return this.authService.isLoggedIn()}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(c.e))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})();var $=i(2355),f=i(8248),y=i(5887),x=i(4121),d=i(8023),h=i(1528),F=i(3568),w=i(8168),_=i(1860),N=i(3528),I=i(4945),U=i(3647);function M(r,o){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Email is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}function E(r,o){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Password is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}let S=(()=>{class r{constructor(e,n,a,m){this.formBuilder=e,this.authService=n,this.tokenService=a,this.router=m,this.loginForm=this.formBuilder.group({email:["",s.kI.required],password:["",s.kI.required]}),this.loginError$=new x.X(""),this.loginData$=new d.x,this.subscriptionManager$=new d.x,this.login$=this.loginData$.pipe((0,h.w)(l=>n.login(l).pipe((0,h.w)(u=>this.tokenService.set(u)),(0,F.K)(this.handleLoginError.bind(this)))))}ngOnInit(){const e=this.login$.pipe((0,w.b)(n=>{null!==n?this.router.navigate(["/"]):this.loginForm.markAllAsTouched()}));(0,_.T)(e).pipe((0,N.R)(this.subscriptionManager$)).subscribe()}ngOnDestroy(){this.subscriptionManager$.next(),this.subscriptionManager$.complete()}onSubmit(){this.loginForm.markAllAsTouched(),!this.loginForm.invalid&&this.loginData$.next({email:this.loginForm.value.email??"",password:this.loginForm.value.password??""})}handleLoginError(e){return e instanceof y.o&&this.loginError$.next(e.detail),(0,I.of)(null)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(s.qu),t.Y36(c.e),t.Y36(U.B),t.Y36(f.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["camp-login"]],decls:18,vars:7,consts:[[1,"title"],[1,"form",3,"formGroup","ngSubmit"],["appearance","fill",1,"form__field"],["type","email","matInput","","placeholder","Ex. pat@example.com","formControlName","email"],[4,"ngIf"],["type","password","matInput","","placeholder","Type your password.","formControlName","password"],["type","submit","mat-flat-button","","color","primary",1,"form__submit",3,"disabled"]],template:function(e,n){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Log in"),t.qZA(),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(3,"mat-form-field",2)(4,"mat-label"),t._uU(5,"Email"),t.qZA(),t._UZ(6,"input",3),t.YNc(7,M,4,0,"mat-error",4),t.qZA(),t.TgZ(8,"mat-form-field",2)(9,"mat-label"),t._uU(10,"Password"),t.qZA(),t._UZ(11,"input",5),t.YNc(12,E,4,0,"mat-error",4),t.qZA(),t.TgZ(13,"mat-error"),t._uU(14),t.ALo(15,"async"),t.qZA(),t.TgZ(16,"button",6),t._uU(17,"Log in"),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("formGroup",n.loginForm),t.xp6(5),t.Q6J("ngIf",n.loginForm.controls.email.hasError("required")),t.xp6(5),t.Q6J("ngIf",n.loginForm.controls.password.hasError("required")),t.xp6(2),t.hij(" ",t.lcZ(15,5,n.loginError$)," "),t.xp6(2),t.Q6J("disabled",n.loginForm.invalid))},dependencies:[p.O5,g.TO,g.KE,g.hX,A.Nt,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,v.lW,p.Ov],styles:[".title[_ngcontent-%COMP%]{font-family:var(--header-font);text-align:center;margin:20px}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;align-items:center;width:100%;margin-bottom:50px}.form__field[_ngcontent-%COMP%]{min-width:500px;margin:15px 0}.form__submit[_ngcontent-%COMP%]{min-width:500px;margin-top:15px}"],changeDetection:0}),r})();var q=i(8635);class J extends q.o{constructor(o){super(),this.email=o.email,this.firstName=o.firstName,this.lastName=o.lastName,this.password=o.password}}function O(r,o){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=o.$implicit;t.xp6(1),t.hij(" ",e," ")}}function R(r,o){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Email is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}function Y(r,o){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=o.$implicit;t.xp6(1),t.hij(" ",e," ")}}function P(r,o){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=o.$implicit;t.xp6(1),t.hij(" ",e," ")}}function j(r,o){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=o.$implicit;t.xp6(1),t.hij(" ",e," ")}}function Q(r,o){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Password is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}function D(r,o){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Confirm password must match "),t.qZA())}function G(r,o){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Confirm password is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}const Z=function(){return[]},B=[{path:"login",canActivate:[C],component:S},{path:"register",canActivate:[C],component:(()=>{class r{constructor(e,n,a,m){this.formBuilder=e,this.tokenService=n,this.authService=a,this.router=m,this.errorList$=new x.X({}),this.account$=new d.x,this.subscriptionManager$=new d.x,this.registerForm=this.formBuilder.group({email:["",s.kI.required],firstName:[""],lastName:[""],password:["",s.kI.required],confirmPassword:["",[s.kI.required]]},{validators:this.checkPasswords}),this.register$=this.account$.pipe((0,h.w)(l=>a.register(l).pipe((0,h.w)(u=>this.tokenService.set(u)),(0,F.K)(this.handleRegisterError.bind(this)))))}ngOnInit(){const e=this.register$.pipe((0,w.b)(n=>{null!==n?this.router.navigate(["/"]):this.registerForm.markAllAsTouched()}));(0,_.T)(e).pipe((0,N.R)(this.subscriptionManager$)).subscribe()}ngOnDestroy(){this.subscriptionManager$.next(),this.subscriptionManager$.complete()}onSubmit(){this.registerForm.markAllAsTouched(),!this.registerForm.invalid&&this.account$.next(new J({email:this.registerForm.value.email??"",firstName:this.registerForm.value.firstName??"",lastName:this.registerForm.value.lastName??"",password:this.registerForm.value.password??""}))}checkPasswords(e){const n=e.get("password")?.value,a=e.get("confirmPassword")?.value;return n!==a?(e.get("confirmPassword")?.setErrors({notSame:!0}),{notSame:!0}):null}handleRegisterError(e){if(e instanceof y.o){this.errorList$.next(e.data);for(const n of Object.keys(e.data))this.registerForm.get(n)?.setErrors({invalidData:!0})}return(0,I.of)(null)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(s.qu),t.Y36(U.B),t.Y36(c.e),t.Y36(f.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["camp-register"]],decls:37,vars:22,consts:[[1,"title"],[1,"form",3,"formGroup","ngSubmit"],["appearance","fill",1,"form__field"],[1,"form__field--label"],["autoComplete","true","type","email","matInput","","placeholder","Ex. pat@example.com","formControlName","email",1,"form__field--input"],[4,"ngFor","ngForOf"],[4,"ngIf"],["autoComplete","true","type","text","matInput","","placeholder","Cristiano","formControlName","lastName",1,"form__field--input"],["autoComplete","true","type","text","matInput","","placeholder","Ronaldo","formControlName","firstName",1,"form__field--input"],["autoComplete","true","type","password","matInput","","placeholder","Type your password.","formControlName","password",1,"form__field--input"],["autoComplete","true","type","password","matInput","","placeholder","Confirm your password.","formControlName","confirmPassword",1,"form__field--input"],["type","submit","mat-flat-button","","color","primary",1,"form__submit",3,"disabled"]],template:function(e,n){if(1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Register"),t.qZA(),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(3,"mat-form-field",2)(4,"mat-label",3),t._uU(5,"Email"),t.qZA(),t._UZ(6,"input",4),t.YNc(7,O,2,1,"mat-error",5),t.ALo(8,"async"),t.YNc(9,R,4,0,"mat-error",6),t.qZA(),t.TgZ(10,"mat-form-field",2)(11,"mat-label",3),t._uU(12,"Last name"),t.qZA(),t._UZ(13,"input",7),t.YNc(14,Y,2,1,"mat-error",5),t.ALo(15,"async"),t.qZA(),t.TgZ(16,"mat-form-field",2)(17,"mat-label",3),t._uU(18,"First name"),t.qZA(),t._UZ(19,"input",8),t.YNc(20,P,2,1,"mat-error",5),t.ALo(21,"async"),t.qZA(),t.TgZ(22,"mat-form-field",2)(23,"mat-label",3),t._uU(24,"Password"),t.qZA(),t._UZ(25,"input",9),t.YNc(26,j,2,1,"mat-error",5),t.ALo(27,"async"),t.YNc(28,Q,4,0,"mat-error",6),t.qZA(),t.TgZ(29,"mat-form-field",2)(30,"mat-label",3),t._uU(31,"Confirm password"),t.qZA(),t._UZ(32,"input",10),t.YNc(33,D,2,0,"mat-error",6),t.YNc(34,G,4,0,"mat-error",6),t.qZA(),t.TgZ(35,"button",11),t._uU(36," Register "),t.qZA()()),2&e){let a,m,l,u;t.xp6(2),t.Q6J("formGroup",n.registerForm),t.xp6(5),t.Q6J("ngForOf",null!==(a=null==(a=t.lcZ(8,10,n.errorList$))?null:a.email)&&void 0!==a?a:t.DdM(18,Z)),t.xp6(2),t.Q6J("ngIf",n.registerForm.controls.email.hasError("required")),t.xp6(5),t.Q6J("ngForOf",null!==(m=null==(m=t.lcZ(15,12,n.errorList$))?null:m.last_name)&&void 0!==m?m:t.DdM(19,Z)),t.xp6(6),t.Q6J("ngForOf",null!==(l=null==(l=t.lcZ(21,14,n.errorList$))?null:l.first_name)&&void 0!==l?l:t.DdM(20,Z)),t.xp6(6),t.Q6J("ngForOf",null!==(u=null==(u=t.lcZ(27,16,n.errorList$))?null:u.password)&&void 0!==u?u:t.DdM(21,Z)),t.xp6(2),t.Q6J("ngIf",n.registerForm.controls.password.hasError("required")),t.xp6(5),t.Q6J("ngIf",n.registerForm.controls.confirmPassword.hasError("notSame")),t.xp6(1),t.Q6J("ngIf",n.registerForm.controls.confirmPassword.hasError("required")),t.xp6(1),t.Q6J("disabled",n.registerForm.invalid)}},dependencies:[p.sg,p.O5,g.TO,g.KE,g.hX,A.Nt,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,v.lW,p.Ov],styles:[".title[_ngcontent-%COMP%]{font-family:var(--header-font);text-align:center;margin:20px}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;align-items:center;width:100%;margin-bottom:50px}.form__field[_ngcontent-%COMP%]{min-width:500px;margin:15px 0}.form__submit[_ngcontent-%COMP%]{min-width:500px;margin-top:15px}"],changeDetection:0}),r})()}];let k=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[f.Bz.forChild(B),f.Bz]}),r})(),X=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[L,C],imports:[p.ez,b.Cq,A.c,g.lN,s.UX,s.u5,v.ot,$.m,k]}),r})()}}]);