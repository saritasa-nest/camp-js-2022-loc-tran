"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[384],{7384:(fr,N,s)=>{s.r(N),s.d(N,{AuthModule:()=>pr});var u=s(8692),i=s(9900),T=s(9638),h=s(8659),y=s(9665),z=s(8697),r=s(4537),A=s(4581),I=s(8023),g=s(9018),x=s(1860),X=s(818),V=s(408);const S=new X.y(V.Z);var D=s(8168),R=s(6466),W=s(2147),O=s(1927),L=s(1528),w=s(116),$=s(3528);function H(o,e){if(1&o&&(r.TgZ(0,"label",2),r._uU(1),r.qZA()),2&o){const t=r.oxw();r.ekj("hide-control",t.hideError),r.xp6(1),r.Oqu(t.errorText)}}function K(o,e){}function k(o,e){1&o&&r.YNc(0,K,0,0,"ng-template")}let Y=(()=>{class o{constructor(t,n){this.cdr=t,this.host=n,this.errorText=null,this.hideError=!0}createTemplate(t,n,l){this.errorTemplate=t,this.errorContext={$implicit:n,text:l},this.cdr.markForCheck()}set customClass(t){const n=Array.isArray(t)?t:t.split(/\s/);this.host.nativeElement.classList.add(...n)}set text(t){t!==this.errorText&&(this.errorText=t,this.hideError=!t,this.cdr.markForCheck())}}return o.\u0275fac=function(t){return new(t||o)(r.Y36(r.sBO),r.Y36(r.SBq))},o.\u0275cmp=r.Xpm({type:o,selectors:[["control-error"]],decls:2,vars:3,consts:[["class","control-error",3,"hide-control",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"control-error"]],template:function(t,n){1&t&&(r.YNc(0,H,2,3,"label",0),r.YNc(1,k,1,0,null,1)),2&t&&(r.Q6J("ngIf",!n.errorTemplate),r.xp6(1),r.Q6J("ngTemplateOutlet",n.errorTemplate)("ngTemplateOutletContext",n.errorContext))},dependencies:[u.O5,u.tP],styles:[".hide-control[_ngcontent-%COMP%]{display:none!important}[_nghost-%COMP%]{display:block}"],changeDetection:0}),o})();const P=new r.OlP("FORM_ERRORS",{providedIn:"root",factory:()=>({})}),U=new r.OlP("ErrorTailorConfigProvider");let J=(()=>{class o{constructor(t){this.vcr=t}}return o.\u0275fac=function(t){return new(t||o)(r.Y36(r.s_b))},o.\u0275dir=r.lG2({type:o,selectors:[["","controlErrorAnchor",""]],exportAs:["controlErrorAnchor"]}),o})(),d=(()=>{class o{constructor(t){this.host=t,this.submit$=(0,A.R)(this.element,"submit").pipe((0,D.b)(()=>{!1===this.element.classList.contains("form-submitted")&&this.element.classList.add("form-submitted")}),(0,R.d)({refCount:!0,bufferSize:1})),this.reset$=(0,A.R)(this.element,"reset").pipe((0,D.b)(()=>{this.element.classList.remove("form-submitted")}),(0,R.d)({refCount:!0,bufferSize:1}))}get element(){return this.host.nativeElement}}return o.\u0275fac=function(t){return new(t||o)(r.Y36(r.SBq))},o.\u0275dir=r.lG2({type:o,selectors:[["form","errorTailor",""]]}),o})(),Z=(()=>{class o{constructor(t,n,l,a,c,m,C,q,M){this.vcr=t,this.resolver=n,this.host=l,this.config=a,this.globalErrors=c,this.controlErrorAnchorParent=m,this.form=C,this.ngControl=q,this.controlContainer=M,this.customErrors={},this.destroy=new I.x,this.showError$=new I.x,this.mergedConfig={},this.submit$=this.form?this.form.submit$:g.E,this.reset$=this.form?this.form.reset$:g.E}ngOnInit(){this.mergedConfig=this.buildConfig(),this.anchor=this.resolveAnchor(),this.control=(this.controlContainer||this.ngControl).control;const t=!!this.control.asyncValidator,n=this.control.statusChanges.pipe((0,W.x)()),l=this.control.valueChanges,a=(0,x.T)(n,l);let c=g.E,m=g.E,C=g.E;this.mergedConfig.controlErrorsOn.async&&t&&(c=n.pipe((0,O.O)(!0))),this.isInput&&this.mergedConfig.controlErrorsOn.change&&(C=l),this.isInput&&this.mergedConfig.controlErrorsOn.blur&&(m=(0,A.R)(this.host.nativeElement,"focusout").pipe((0,L.w)(()=>l.pipe((0,O.O)(!0)))));const M=(0,x.T)(this.submit$.pipe((0,w.h)(!0)),this.reset$.pipe((0,w.h)(!1))).pipe((0,L.w)(G=>G?a.pipe((0,O.O)(!0)):S));this.reset$.pipe((0,$.R)(this.destroy)).subscribe(()=>this.clearRefs()),(0,x.T)(c,m,C,M,this.showError$).pipe((0,$.R)(this.destroy)).subscribe(()=>this.valueChanges())}setError(t,n){if(!this.ref){const a=this.resolver.resolveComponentFactory(this.mergedConfig.controlErrorComponent);this.ref=this.anchor.createComponent(a)}const l=this.ref.instance;this.controlErrorsTpl?l.createTemplate(this.controlErrorsTpl,n,t):l.text=t,this.controlErrorsClass&&(l.customClass=this.controlErrorsClass),!this.controlErrorAnchor&&this.mergedConfig.controlErrorComponentAnchorFn&&(this.customAnchorDestroyFn=this.mergedConfig.controlErrorComponentAnchorFn(this.host.nativeElement,this.ref.hostView.rootNodes[0]))}showError(){this.showError$.next()}hideError(){this.setError(null)}ngOnDestroy(){this.destroy.next(),this.clearRefs()}get isInput(){return this.mergedConfig.blurPredicate(this.host.nativeElement)}clearRefs(){this.customAnchorDestroyFn&&(this.customAnchorDestroyFn(),this.customAnchorDestroyFn=null),this.ref&&this.ref.destroy(),this.ref=null}valueChanges(){const t=this.control.errors;if(t){const[n]=Object.keys(t),l=this.customErrors[n]||this.globalErrors[n];if(!l)return;const a="function"==typeof l?l(t[n]):l;this.isInput&&this.host.nativeElement.parentElement.classList.add("error-tailor-has-error"),this.setError(a,t)}else this.ref&&(this.isInput&&this.host.nativeElement.parentElement.classList.remove("error-tailor-has-error"),this.setError(null))}resolveAnchor(){return this.controlErrorAnchor?this.controlErrorAnchor.vcr:this.controlErrorAnchorParent?this.controlErrorAnchorParent.vcr:this.vcr}buildConfig(){return{blurPredicate:t=>"INPUT"===t.tagName||"SELECT"===t.tagName,controlErrorComponent:Y,...this.config,controlErrorsOn:{async:this.controlErrorsOnAsync??this.config.controlErrorsOn?.async??!0,blur:this.controlErrorsOnBlur??this.config.controlErrorsOn?.blur??!0,change:this.controlErrorsOnChange??this.config.controlErrorsOn?.change??!1}}}}return o.\u0275fac=function(t){return new(t||o)(r.Y36(r.s_b),r.Y36(r._Vd),r.Y36(r.SBq),r.Y36(U),r.Y36(P),r.Y36(J,8),r.Y36(d,8),r.Y36(i.a5,10),r.Y36(i.gN,10))},o.\u0275dir=r.lG2({type:o,selectors:[["","formControlName","",3,"controlErrorsIgnore",""],["","formControl","",3,"controlErrorsIgnore",""],["","formGroup","",3,"controlErrorsIgnore",""],["","formGroupName","",3,"controlErrorsIgnore",""],["","formArrayName","",3,"controlErrorsIgnore",""],["","ngModel","",3,"controlErrorsIgnore",""]],inputs:{customErrors:["controlErrors","customErrors"],controlErrorsClass:"controlErrorsClass",controlErrorsTpl:"controlErrorsTpl",controlErrorsOnAsync:"controlErrorsOnAsync",controlErrorsOnBlur:"controlErrorsOnBlur",controlErrorsOnChange:"controlErrorsOnChange",controlErrorAnchor:"controlErrorAnchor"},exportAs:["errorTailor"]}),o})(),rr=(()=>{class o{static forRoot(t={}){return{ngModule:o,providers:[{provide:U,useValue:t},{provide:P,...t.errors}]}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=r.oAB({type:o}),o.\u0275inj=r.cJS({imports:[[u.ez]]}),o})();var tr=s(2355),b=s(6533),F=s(3382);let or=(()=>{class o{constructor(t){this.authService=t}canActivate(){return this.authService.isNotLoggedIn()}}return o.\u0275fac=function(t){return new(t||o)(r.LFG(F.e))},o.\u0275prov=r.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var _=s(4762),B=s(5887),v=s(3804),Q=s(4121);let j=(()=>{class o{constructor(t){this.router=t}navigate(t){return this.router.navigate([t])}navigateToHome(){return this.router.navigate(["/"])}}return o.\u0275fac=function(t){return new(t||o)(r.LFG(b.F0))},o.\u0275prov=r.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function nr(o,e){if(1&o&&(r.TgZ(0,"span",9),r._uU(1),r.qZA()),2&o){const t=e.text;r.xp6(1),r.Oqu(t)}}function sr(o,e){if(1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&o){const t=e.ngIf;r.xp6(1),r.hij(" ",t," ")}}let p=class{constructor(e,t,n){this.formBuilder=e,this.authService=t,this.navigateService=n,this.loginForm=this.formBuilder.group({email:["",i.kI.required,i.kI.email],password:["",i.kI.required]}),this.loginError$=new Q.X("")}onSubmit(){this.loginForm.markAllAsTouched(),!this.loginForm.invalid&&this.authService.login({email:this.loginForm.value.email??"",password:this.loginForm.value.password??""}).pipe((0,v.t)(this)).subscribe({next:()=>this.navigateService.navigateToHome(),error:e=>this.handleLoginError(e)})}handleLoginError(e){e instanceof B.X&&this.loginError$.next(e.detail)}};function ir(o,e){if(1&o&&(r.TgZ(0,"span",12),r._uU(1),r.qZA()),2&o){const t=e.text;r.xp6(1),r.Oqu(t)}}function lr(o,e){if(1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&o){const t=e.$implicit;r.xp6(1),r.hij(" ",t," ")}}function ar(o,e){if(1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&o){const t=e.$implicit;r.xp6(1),r.hij(" ",t," ")}}function cr(o,e){if(1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&o){const t=e.$implicit;r.xp6(1),r.hij(" ",t," ")}}function mr(o,e){if(1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&o){const t=e.$implicit;r.xp6(1),r.hij(" ",t," ")}}p.\u0275fac=function(e){return new(e||p)(r.Y36(i.qu),r.Y36(F.e),r.Y36(j))},p.\u0275cmp=r.Xpm({type:p,selectors:[["camp-login"]],decls:17,vars:7,consts:[[1,"title"],["errorTailor","",1,"form",3,"formGroup","ngSubmit"],["tpl",""],["appearance","fill","errorTailor","",1,"form__field"],["type","email","matInput","","placeholder","Ex. pat@example.com","formControlName","email",3,"controlErrorsTpl"],["appearance","fill",1,"form__field"],["type","password","matInput","","placeholder","Type your password.","formControlName","password",3,"controlErrorsTpl"],[4,"ngIf"],["type","submit","mat-flat-button","","color","primary",1,"form__submit",3,"disabled"],[1,"control-error"]],template:function(e,t){if(1&e&&(r.TgZ(0,"h1",0),r._uU(1,"Log in"),r.qZA(),r.TgZ(2,"form",1),r.NdJ("ngSubmit",function(){return t.onSubmit()}),r.YNc(3,nr,2,1,"ng-template",null,2,r.W1O),r.TgZ(5,"mat-form-field",3)(6,"mat-label"),r._uU(7,"Email"),r.qZA(),r._UZ(8,"input",4),r.qZA(),r.TgZ(9,"mat-form-field",5)(10,"mat-label"),r._uU(11,"Password"),r.qZA(),r._UZ(12,"input",6),r.qZA(),r.YNc(13,sr,2,1,"mat-error",7),r.ALo(14,"async"),r.TgZ(15,"button",8),r._uU(16," Log in "),r.qZA()()),2&e){const n=r.MAs(4);r.xp6(2),r.Q6J("formGroup",t.loginForm),r.xp6(6),r.Q6J("controlErrorsTpl",n),r.xp6(4),r.Q6J("controlErrorsTpl",n),r.xp6(1),r.Q6J("ngIf",r.lcZ(14,5,t.loginError$)),r.xp6(2),r.Q6J("disabled",t.loginForm.invalid)}},dependencies:[u.O5,h.TO,h.KE,h.hX,y.Nt,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,T.lW,Z,d,u.Ov],styles:[".title[_ngcontent-%COMP%]{font-family:var(--header-font);text-align:center;margin:20px}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;align-items:center;width:100%;margin-bottom:50px}.form__field[_ngcontent-%COMP%]{min-width:500px;margin:15px 0}.form__submit[_ngcontent-%COMP%]{min-width:500px;margin-top:15px}.control-error[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:12px;color:var(--font-color-error)}"],changeDetection:0}),p=(0,_.gn)([(0,v.c)()],p);const E=function(){return[]};let f=class{constructor(e,t,n){this.formBuilder=e,this.authService=t,this.navigateService=n,this.errorList$=new Q.X({}),this.registerForm=this.formBuilder.group({email:["",i.kI.required,i.kI.email],firstName:[""],lastName:[""],password:["",i.kI.required],confirmPassword:["",[i.kI.required]]},{validators:this.checkPasswords})}onSubmit(){this.registerForm.markAllAsTouched(),!this.registerForm.invalid&&this.authService.register({email:this.registerForm.value.email??"",firstName:this.registerForm.value.firstName??"",lastName:this.registerForm.value.lastName??"",password:this.registerForm.value.password??""}).pipe((0,v.t)(this)).subscribe({next:()=>this.navigateService.navigateToHome(),error:e=>this.handleRegisterError(e)})}checkPasswords(e){const t=e.get("password")?.value,n=e.get("confirmPassword")?.value;return t!==n?(e.get("confirmPassword")?.setErrors({notSame:!0}),{notSame:!0}):null}handleRegisterError(e){if(e instanceof B.X){this.errorList$.next(e.data);for(const t of Object.keys(e.data))this.registerForm.get(t)?.setErrors({invalidData:!0})}}};f.\u0275fac=function(e){return new(e||f)(r.Y36(i.qu),r.Y36(F.e),r.Y36(j))},f.\u0275cmp=r.Xpm({type:f,selectors:[["camp-register"]],decls:35,vars:23,consts:[[1,"title"],["errorTailor","",1,"form",3,"formGroup","ngSubmit"],["tpl",""],["appearance","fill",1,"form__field"],[1,"form__label"],["autocomplete","true","type","email","matInput","","placeholder","Ex. pat@example.com","formControlName","email",1,"form__input",3,"controlErrorsTpl"],[4,"ngFor","ngForOf"],["autoComplete","true","type","text","matInput","","placeholder","Cristiano","formControlName","lastName",1,"form__input",3,"controlErrorsTpl"],["autoComplete","true","type","text","matInput","","placeholder","Ronaldo","formControlName","firstName",1,"form__input",3,"controlErrorsTpl"],["autoComplete","true","type","password","matInput","","placeholder","Type your password.","formControlName","password",1,"form__input",3,"controlErrorsTpl"],["autoComplete","true","type","password","matInput","","placeholder","Confirm your password.","formControlName","confirmPassword",1,"form__input",3,"controlErrorsTpl"],["type","submit","mat-flat-button","","color","primary",1,"form__submit",3,"disabled"],[1,"control-error"]],template:function(e,t){if(1&e&&(r.TgZ(0,"h1",0),r._uU(1,"Register"),r.qZA(),r.TgZ(2,"form",1),r.NdJ("ngSubmit",function(){return t.onSubmit()}),r.YNc(3,ir,2,1,"ng-template",null,2,r.W1O),r.TgZ(5,"mat-form-field",3)(6,"mat-label",4),r._uU(7,"Email"),r.qZA(),r._UZ(8,"input",5),r.YNc(9,lr,2,1,"mat-error",6),r.ALo(10,"async"),r.qZA(),r.TgZ(11,"mat-form-field",3)(12,"mat-label",4),r._uU(13,"Last name"),r.qZA(),r._UZ(14,"input",7),r.YNc(15,ar,2,1,"mat-error",6),r.ALo(16,"async"),r.qZA(),r.TgZ(17,"mat-form-field",3)(18,"mat-label",4),r._uU(19,"First name"),r.qZA(),r._UZ(20,"input",8),r.YNc(21,cr,2,1,"mat-error",6),r.ALo(22,"async"),r.qZA(),r.TgZ(23,"mat-form-field",3)(24,"mat-label",4),r._uU(25,"Password"),r.qZA(),r._UZ(26,"input",9),r.YNc(27,mr,2,1,"mat-error",6),r.ALo(28,"async"),r.qZA(),r.TgZ(29,"mat-form-field",3)(30,"mat-label",4),r._uU(31,"Confirm password"),r.qZA(),r._UZ(32,"input",10),r.qZA(),r.TgZ(33,"button",11),r._uU(34," Register "),r.qZA()()),2&e){const n=r.MAs(4);let l,a,c,m;r.xp6(2),r.Q6J("formGroup",t.registerForm),r.xp6(6),r.Q6J("controlErrorsTpl",n),r.xp6(1),r.Q6J("ngForOf",null!==(l=null==(l=r.lcZ(10,11,t.errorList$))?null:l.email)&&void 0!==l?l:r.DdM(19,E)),r.xp6(5),r.Q6J("controlErrorsTpl",n),r.xp6(1),r.Q6J("ngForOf",null!==(a=null==(a=r.lcZ(16,13,t.errorList$))?null:a.last_name)&&void 0!==a?a:r.DdM(20,E)),r.xp6(5),r.Q6J("controlErrorsTpl",n),r.xp6(1),r.Q6J("ngForOf",null!==(c=null==(c=r.lcZ(22,15,t.errorList$))?null:c.first_name)&&void 0!==c?c:r.DdM(21,E)),r.xp6(5),r.Q6J("controlErrorsTpl",n),r.xp6(1),r.Q6J("ngForOf",null!==(m=null==(m=r.lcZ(28,17,t.errorList$))?null:m.password)&&void 0!==m?m:r.DdM(22,E)),r.xp6(5),r.Q6J("controlErrorsTpl",n),r.xp6(1),r.Q6J("disabled",t.registerForm.invalid)}},dependencies:[u.sg,h.TO,h.KE,h.hX,y.Nt,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,T.lW,Z,d,u.Ov],styles:[".title[_ngcontent-%COMP%]{font-family:var(--header-font);text-align:center;margin:20px}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;align-items:center;width:100%;margin-bottom:50px}.form__field[_ngcontent-%COMP%]{min-width:500px;margin:15px 0}.form__submit[_ngcontent-%COMP%]{min-width:500px;margin-top:15px}.control-error[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:12px;color:var(--font-color-error)}"],changeDetection:0}),f=(0,_.gn)([(0,v.c)()],f);const ur=[{path:"",canActivate:[or],children:[{path:"login",component:p},{path:"register",component:f}]}];let hr=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=r.oAB({type:o}),o.\u0275inj=r.cJS({imports:[b.Bz.forChild(ur),b.Bz]}),o})(),pr=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=r.oAB({type:o}),o.\u0275inj=r.cJS({imports:[u.ez,z.Cq,y.c,h.lN,i.UX,i.u5,T.ot,tr.m,hr,rr.forRoot({errors:{useValue:{required:"This field is required",notSame:"Confirm password must matched",email:"Invalid email."}}})]}),o})()}}]);